import{_ as m,r as d,o as y,c as u,a as t,b as l,w as _,d as S,v as b,e as g,f as p,F as B,g as v,h as $,t as f,s as T,i as x}from"./index-c6f705be.js";const F={data(){return{filterBy:{inStock:"all",name:"",labels:[]},sortBy:{order:"-1"}}},methods:{setFilterBy(){console.log("filtering",this.filterBy),this.$emit("setFilterBy",{...this.filterBy})},setSortBy(){this.$emit("setSortBy",{...this.sortBy})}},computed:{labels(){return this.$store.getters.labels}}},k={class:"filter-sort-toys flex-column"},w=t("h3",null,"Sort",-1),C={class:"sort-toys flex-column justify-between"},V=t("h3",null,"Filter",-1),L={class:"filter-toys flex-column gap"};function A(r,o,a,h,i,s){const n=d("el-option"),c=d("el-select");return y(),u("section",k,[w,t("div",C,[l(c,{modelValue:i.sortBy.order,"onUpdate:modelValue":o[0]||(o[0]=e=>i.sortBy.order=e),onChange:s.setSortBy},{default:_(()=>[l(n,{value:"-1",label:"Newest first"}),l(n,{value:"1",label:"Oldest first"}),l(n,{value:"priceAsc",label:"Price Low to High"}),l(n,{value:"priceDesc",label:"Price High to Low"})]),_:1},8,["modelValue","onChange"])]),V,t("form",L,[S(t("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>i.filterBy.name=e),placeholder:"Search...",onInput:o[2]||(o[2]=g((...e)=>s.setFilterBy&&s.setFilterBy(...e),["prevent"]))},null,544),[[b,i.filterBy.name]]),p(" Stock "),l(c,{modelValue:i.filterBy.inStock,"onUpdate:modelValue":o[3]||(o[3]=e=>i.filterBy.inStock=e),onChange:s.setFilterBy},{default:_(()=>[l(n,{value:"all",label:"All"}),l(n,{value:"true",label:"Available"}),l(n,{value:"false",label:"Out of stock"})]),_:1},8,["modelValue","onChange"]),p(" Categories "),l(c,{modelValue:i.filterBy.labels,"onUpdate:modelValue":o[4]||(o[4]=e=>i.filterBy.labels=e),onChange:s.setFilterBy,multiple:"",placeholder:"All",clearable:""},{default:_(()=>[(y(!0),u(B,null,v(s.labels,e=>(y(),$(n,{label:e,value:e,key:e,selected:""},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])])}const D=m(F,[["render",A]]),N={props:{toy:Object}},R=["src"],O={class:""};function P(r,o,a,h,i,s){return y(),u(B,null,[t("img",{src:a.toy.imageUrl},null,8,R),t("article",O,[t("div",null,[t("h5",null,f(a.toy.name)+", id: "+f(a.toy._id),1),t("h4",null,"$"+f(a.toy.price),1)])])],64)}const U=m(N,[["render",P]]),j={props:{toys:Array,required:!0},methods:{removeToy(r){this.$emit("removeToy",r)}},components:{ToyPreview:U}},M={class:"toy-list"},E={class:"flex-column justify-between"},I={class:"controls flex justify-between"},H=["onClick"],J=["onClick"],q=["onClick"];function G(r,o,a,h,i,s){const n=d("ToyPreview");return y(),u("section",M,[t("ul",null,[(y(!0),u(B,null,v(a.toys,c=>(y(),u("li",E,[t("div",I,[t("button",{onClick:e=>this.$router.push("/toy/"+c._id),title:"Go to details"},"Details",8,H),t("button",{onClick:e=>this.$router.push("/toy/edit/"+c._id)},"Edit",8,J),t("button",{onClick:e=>s.removeToy(c._id),title:"Delete"}," X ",8,q)]),l(n,{toy:c},null,8,["toy"])]))),256))])])}const X=m(j,[["render",G]]),z={computed:{toys(){return this.$store.getters.toysForDisplay}},methods:{onRemoveToy(r){this.$store.dispatch({type:"removeToy",toyId:r}).then(o=>T("Successfully removed toy")).catch(o=>x("Failed to remove toy"))},onSetFilterBy(r){this.$store.dispatch({type:"setFilterBy",filterBy:JSON.parse(JSON.stringify(r))})},onSetSortBy(r){this.$store.dispatch({type:"setSortBy",sortBy:{...r}})}},components:{ToyFilter:D,ToyList:X}},K={class:"toy-index"},Q={class:"index flex"};function W(r,o,a,h,i,s){const n=d("RouterLink"),c=d("ToyFilter"),e=d("ToyList");return y(),u("section",K,[l(n,{to:"/toy/edit",class:"add-toy"},{default:_(()=>[p("Add new toy")]),_:1}),t("div",Q,[l(c,{onSetFilterBy:s.onSetFilterBy,onSetSortBy:s.onSetSortBy},null,8,["onSetFilterBy","onSetSortBy"]),l(e,{class:"grow",toys:s.toys,onRemoveToy:s.onRemoveToy},null,8,["toys","onRemoveToy"])])])}const Z=m(z,[["render",W]]);export{Z as default};
