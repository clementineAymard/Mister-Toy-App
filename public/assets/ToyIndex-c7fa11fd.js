import{_ as h,r as d,o as c,c as y,a as e,w as p,v,b as S,d as F,e as a,f as _,g,F as B,h as $,i as T,t as f,s as x,j as k}from"./index-55dc587a.js";const w={data(){return{filterBy:{inStock:"all",name:"",labels:[]},sortBy:{order:-1}}},methods:{setFilterBy(){console.log("filtering",this.filterBy),this.$emit("setFilterBy",{...this.filterBy})},setSortBy(){this.$emit("setSortBy",{...this.sortBy})}},computed:{labels(){return this.$store.getters.labels}}},b={class:"filter-sort-toys flex-column"},C=e("h3",null,"Sort",-1),V=e("option",{value:"1"},"Oldest first",-1),L=e("option",{value:"-1",selected:""},"Newest first",-1),A=e("option",{value:"priceAsc"},"Price Low to High",-1),D=e("option",{value:"priceDesc"},"Price High to Low",-1),N=[V,L,A,D],R=e("h3",null,"Filter",-1),M={class:"filter-toys flex-column gap"},O=e("option",{value:"all",selected:""},"All",-1),P=e("option",{value:"true"},"Available",-1),U=e("option",{value:"false"},"Out of stock",-1),j=[O,P,U];function E(l,o,r,m,n,s){const u=d("el-option"),i=d("el-select");return c(),y("section",b,[C,e("form",{onChange:o[1]||(o[1]=S((...t)=>s.setSortBy&&s.setSortBy(...t),["prevent"])),class:"sort-toys flex-column justify-between"},[p(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>n.sortBy.order=t)},N,512),[[v,n.sortBy.order]])],32),R,e("form",M,[p(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=t=>n.filterBy.name=t),placeholder:"Search...",onInput:o[3]||(o[3]=S((...t)=>s.setFilterBy&&s.setFilterBy(...t),["prevent"]))},null,544),[[F,n.filterBy.name]]),a(" Stock "),p(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>n.filterBy.inStock=t),onChange:o[5]||(o[5]=(...t)=>s.setFilterBy&&s.setFilterBy(...t))},j,544),[[v,n.filterBy.inStock]]),a(" Categories "),_(i,{modelValue:n.filterBy.labels,"onUpdate:modelValue":o[6]||(o[6]=t=>n.filterBy.labels=t),onChange:s.setFilterBy,multiple:"",placeholder:"All",style:{width:"240px"}},{default:g(()=>[(c(!0),y(B,null,$(s.labels,t=>(c(),T(u,{label:t,value:t,key:t,selected:""},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])])}const I=h(w,[["render",E]]),H={props:{toy:Object}},J=["src"],q={class:""};function G(l,o,r,m,n,s){return c(),y(B,null,[e("img",{src:r.toy.imageUrl},null,8,J),e("article",q,[e("div",null,[e("h5",null,f(r.toy.name)+", id: "+f(r.toy._id),1),e("h4",null,"$"+f(r.toy.price),1)])])],64)}const X=h(H,[["render",G]]),z={props:{toys:Array,required:!0},methods:{removeToy(l){this.$emit("removeToy",l)}},components:{ToyPreview:X}},K={class:"toy-list"},Q={class:"flex-column justify-between"},W={class:"controls"},Y=["onClick"],Z=["onClick"],ee=e("span",null," | ",-1),te=["onClick"];function oe(l,o,r,m,n,s){const u=d("ToyPreview");return c(),y("section",K,[e("ul",null,[(c(!0),y(B,null,$(r.toys,i=>(c(),y("li",Q,[e("div",W,[e("button",{onClick:t=>this.$router.push("/toy/"+i._id),title:"Go to details"},"Details",8,Y),a(),e("span",null,[a(" | "),e("button",{onClick:t=>this.$router.push("/toy/edit/"+i._id)},"Edit",8,Z),a(),ee]),e("button",{onClick:t=>s.removeToy(i._id),title:"Delete"}," X ",8,te)]),_(u,{toy:i},null,8,["toy"])]))),256))])])}const se=h(z,[["render",oe]]),le={computed:{toys(){return this.$store.getters.toysForDisplay}},methods:{onRemoveToy(l){this.$store.dispatch({type:"removeToy",toyId:l}).then(o=>x("Successfully removed toy")).catch(o=>k("Failed to remove toy"))},onSetFilterBy(l){this.$store.dispatch({type:"setFilterBy",filterBy:JSON.parse(JSON.stringify(l))})},onSetSortBy(l){this.$store.dispatch({type:"setSortBy",sortBy:{...l}})}},components:{ToyFilter:I,ToyList:se}},ne={class:"toy-index"},re={class:"index flex"};function ie(l,o,r,m,n,s){const u=d("RouterLink"),i=d("ToyFilter"),t=d("ToyList");return c(),y("section",ne,[_(u,{to:"/toy/edit",class:"add-toy"},{default:g(()=>[a("Add new toy")]),_:1}),e("div",re,[_(i,{onSetFilterBy:s.onSetFilterBy,onSetSortBy:s.onSetSortBy},null,8,["onSetFilterBy","onSetSortBy"]),_(t,{class:"grow",toys:s.toys,onRemoveToy:s.onRemoveToy},null,8,["toys","onRemoveToy"])])])}const ye=h(le,[["render",ie]]);export{ye as default};
