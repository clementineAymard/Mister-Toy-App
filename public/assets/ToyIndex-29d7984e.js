import{_ as m,r as u,o as y,c as d,a as o,b as l,w as _,d as S,v as g,e as b,f as p,F as B,g as v,h as $,t as f,s as T,i as x}from"./index-d0bc6efd.js";const F={data(){return{filterBy:{inStock:"all",name:"",labels:[]},sortBy:{order:-1}}},methods:{setFilterBy(){console.log("filtering",this.filterBy),this.$emit("setFilterBy",{...this.filterBy})},setSortBy(){this.$emit("setSortBy",{...this.sortBy})}},computed:{labels(){return this.$store.getters.labels},sortByOrder(){return this.sortBy.order.toString()}}},k={class:"filter-sort-toys flex-column"},w=o("h3",null,"Sort",-1),C={class:"sort-toys flex-column justify-between"},V=o("h3",null,"Filter",-1),L={class:"filter-toys flex-column gap"};function O(n,s,a,h,c,t){const r=u("el-option"),i=u("el-select");return y(),d("section",k,[w,o("div",C,[l(i,{modelValue:t.sortByOrder,"onUpdate:modelValue":s[0]||(s[0]=e=>t.sortByOrder=e),onChange:t.setSortBy},{default:_(()=>[l(r,{value:"-1",label:"Newest first"}),l(r,{value:"1",label:"Oldest first"}),l(r,{value:"priceAsc",label:"Price Low to High"}),l(r,{value:"priceDesc",label:"Price High to Low"})]),_:1},8,["modelValue","onChange"])]),V,o("form",L,[S(o("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>c.filterBy.name=e),placeholder:"Search...",onInput:s[2]||(s[2]=b((...e)=>t.setFilterBy&&t.setFilterBy(...e),["prevent"]))},null,544),[[g,c.filterBy.name]]),p(" Stock "),l(i,{modelValue:c.filterBy.inStock,"onUpdate:modelValue":s[3]||(s[3]=e=>c.filterBy.inStock=e),onChange:t.setFilterBy},{default:_(()=>[l(r,{value:"all",label:"All"}),l(r,{value:"true",label:"Available"}),l(r,{value:"false",label:"Out of stock"})]),_:1},8,["modelValue","onChange"]),p(" Categories "),l(i,{modelValue:c.filterBy.labels,"onUpdate:modelValue":s[4]||(s[4]=e=>c.filterBy.labels=e),onChange:t.setFilterBy,multiple:"",placeholder:"All",clearable:""},{default:_(()=>[(y(!0),d(B,null,v(t.labels,e=>(y(),$(r,{label:e,value:e,key:e,selected:""},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])])}const A=m(F,[["render",O]]),D={props:{toy:Object}},N=["src"],R={class:""};function P(n,s,a,h,c,t){return y(),d(B,null,[o("img",{src:a.toy.imageUrl},null,8,N),o("article",R,[o("div",null,[o("h5",null,f(a.toy.name)+", id: "+f(a.toy._id),1),o("h4",null,"$"+f(a.toy.price),1)])])],64)}const U=m(D,[["render",P]]),j={props:{toys:Array,required:!0},methods:{removeToy(n){this.$emit("removeToy",n)}},components:{ToyPreview:U}},M={class:"toy-list"},E={class:"flex-column justify-between"},I={class:"controls flex justify-between"},H=["onClick"],J=["onClick"],q=["onClick"];function G(n,s,a,h,c,t){const r=u("ToyPreview");return y(),d("section",M,[o("ul",null,[(y(!0),d(B,null,v(a.toys,i=>(y(),d("li",E,[o("div",I,[o("button",{onClick:e=>this.$router.push("/toy/"+i._id),title:"Go to details"},"Details",8,H),o("button",{onClick:e=>this.$router.push("/toy/edit/"+i._id)},"Edit",8,J),o("button",{onClick:e=>t.removeToy(i._id),title:"Delete"}," X ",8,q)]),l(r,{toy:i},null,8,["toy"])]))),256))])])}const X=m(j,[["render",G]]),z={computed:{toys(){return this.$store.getters.toysForDisplay}},methods:{onRemoveToy(n){this.$store.dispatch({type:"removeToy",toyId:n}).then(s=>T("Successfully removed toy")).catch(s=>x("Failed to remove toy"))},onSetFilterBy(n){this.$store.dispatch({type:"setFilterBy",filterBy:JSON.parse(JSON.stringify(n))})},onSetSortBy(n){this.$store.dispatch({type:"setSortBy",sortBy:{...n}})}},components:{ToyFilter:A,ToyList:X}},K={class:"toy-index"},Q={class:"index flex"};function W(n,s,a,h,c,t){const r=u("RouterLink"),i=u("ToyFilter"),e=u("ToyList");return y(),d("section",K,[l(r,{to:"/toy/edit",class:"add-toy"},{default:_(()=>[p("Add new toy")]),_:1}),o("div",Q,[l(i,{onSetFilterBy:t.onSetFilterBy,onSetSortBy:t.onSetSortBy},null,8,["onSetFilterBy","onSetSortBy"]),l(e,{class:"grow",toys:t.toys,onRemoveToy:t.onRemoveToy},null,8,["toys","onRemoveToy"])])])}const Z=m(z,[["render",W]]);export{Z as default};
